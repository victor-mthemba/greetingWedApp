try { var jQuery = django.jQuery, $ = jQuery, LANG = "en", LANG_URL_PREFIX = "", I18N = { delete: "Really delete?" } } catch (e) { } var ua = navigator.userAgent.toLowerCase(), mobile_os = (/windows phone/.test(ua) ? "Windows" : /android/.test(ua) && "Android") || /ipad|iphone|ipod/.test(ua) && !window.MSStream && "iOS" || null, is_ie = ~ua.indexOf("msie ") || ~ua.indexOf("trident/"), is_safari = ~ua.indexOf("safari") && !~ua.indexOf("chrome"), ac_xhr, hover_media, hover_media_to, is_human, ww, wh, pure_menu; function getCookie(e) { return (document.cookie.match("(^|; )" + e + "=([^;]*)") || 0)[2] } function setCookie(e, t, o, i) { var n = new Date; n.setTime(n.getTime() + 864e5 * o + 1e3 * (i || 0)), document.cookie = e + "=" + t + ";path=/;expires=" + n.toGMTString() } function copyToClipboard(e) { var t = document.createElement("input"); t.style = "position:absolute;left:-9999px;top:-9999px", t.value = e, document.body.appendChild(t), t.select(), document.execCommand("copy"), document.body.removeChild(t) } function wopen(e, t, o, i) { i = i || "", t = t || 640, o = o || 350; var n = (window.screenLeft ? window.screenLeft : window.screenX) + ww / 2 - t / 2, a = (window.screenTop ? window.screenTop : window.screenY) + wh / 2 - o / 2 - 100; return a <= 0 && (a = 20), window.open(e, i, "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=" + t + ",height=" + o + ",top=" + a + ",left=" + n), !1 } !function (e) { "use strict"; "function" == typeof define && define.amd ? define(["jquery"], e) : e(void 0 !== jQuery ? jQuery : window.Zepto) }(function (e) { "use strict"; function t(t) { var o = t.data; t.isDefaultPrevented() || (t.preventDefault(), e(t.target).ajaxSubmit(o)) } function o(t) { var o = t.target, i = e(o); if (!i.is("[type=submit],[type=image]")) { var n = i.closest("[type=submit]"); if (0 === n.length) return; o = n[0] } var a = this; if (a.clk = o, "image" == o.type) if (void 0 !== t.offsetX) a.clk_x = t.offsetX, a.clk_y = t.offsetY; else if ("function" == typeof e.fn.offset) { var r = i.offset(); a.clk_x = t.pageX - r.left, a.clk_y = t.pageY - r.top } else a.clk_x = t.pageX - o.offsetLeft, a.clk_y = t.pageY - o.offsetTop; setTimeout(function () { a.clk = a.clk_x = a.clk_y = null }, 100) } function i() { if (e.fn.ajaxSubmit.debug) { var t = "[jquery.form] " + Array.prototype.join.call(arguments, ""); window.console && window.console.log ? window.console.log(t) : window.opera && window.opera.postError && window.opera.postError(t) } } var n = {}; n.fileapi = void 0 !== e("<input type='file'/>").get(0).files, n.formdata = void 0 !== window.FormData; var a = !!e.fn.prop; e.fn.attr2 = function () { if (!a) return this.attr.apply(this, arguments); var e = this.prop.apply(this, arguments); return e && e.jquery || "string" == typeof e ? e : this.attr.apply(this, arguments) }, e.fn.ajaxSubmit = function (t) { function o(o) { function n(e) { var t = null; try { e.contentWindow && (t = e.contentWindow.document) } catch (e) { i("cannot get iframe.contentWindow document: " + e) } if (t) return t; try { t = e.contentDocument ? e.contentDocument : e.document } catch (o) { i("cannot get iframe.contentDocument: " + o), t = e.document } return t } function s() { var t = c.attr2("target"), o = c.attr2("action"), a = c.attr("enctype") || c.attr("encoding") || "multipart/form-data"; $.setAttribute("target", p), (!r || /post/i.test(r)) && $.setAttribute("method", "POST"), o != h.url && $.setAttribute("action", h.url), h.skipEncodingOverride || r && !/post/i.test(r) || c.attr({ encoding: "multipart/form-data", enctype: "multipart/form-data" }), h.timeout && (_ = setTimeout(function () { y = !0, l(T) }, h.timeout)); var s = []; try { if (h.extraData) for (var d in h.extraData) h.extraData.hasOwnProperty(d) && s.push(e.isPlainObject(h.extraData[d]) && h.extraData[d].hasOwnProperty("name") && h.extraData[d].hasOwnProperty("value") ? e('<input type="hidden" name="' + h.extraData[d].name + '">').val(h.extraData[d].value).appendTo($)[0] : e('<input type="hidden" name="' + d + '">').val(h.extraData[d]).appendTo($)[0]); h.iframeTarget || g.appendTo("body"), v.attachEvent ? v.attachEvent("onload", l) : v.addEventListener("load", l, !1), setTimeout(function e() { try { var t = n(v).readyState; i("state = " + t), t && "uninitialized" == t.toLowerCase() && setTimeout(e, 50) } catch (e) { i("Server abort: ", e, " (", e.name, ")"), l(C), _ && clearTimeout(_), _ = void 0 } }, 15); try { $.submit() } catch (e) { document.createElement("form").submit.apply($) } } finally { $.setAttribute("action", o), $.setAttribute("enctype", a), t ? $.setAttribute("target", t) : c.removeAttr("target"), e(s).remove() } } function l(t) { if (!w.aborted && !A) { if ((L = n(v)) || (i("cannot access response document"), t = C), t === T && w) return w.abort("timeout"), void k.reject(w, "timeout"); if (t == C && w) return w.abort("server abort"), void k.reject(w, "error", "server abort"); if (L && L.location.href != h.iframeSrc || y) { v.detachEvent ? v.detachEvent("onload", l) : v.removeEventListener("load", l, !1); var o, a = "success"; try { if (y) throw "timeout"; var r = "xml" == h.dataType || L.XMLDocument || e.isXMLDoc(L); if (i("isXml=" + r), !r && window.opera && (null === L.body || !L.body.innerHTML) && --H) return i("requeing onLoad callback, DOM not available"), void setTimeout(l, 250); var s = L.body ? L.body : L.documentElement; w.responseText = s ? s.innerHTML : null, w.responseXML = L.XMLDocument ? L.XMLDocument : L, r && (h.dataType = "xml"), w.getResponseHeader = function (e) { return { "content-type": h.dataType }[e.toLowerCase()] }, s && (w.status = Number(s.getAttribute("status")) || w.status, w.statusText = s.getAttribute("statusText") || w.statusText); var c = (h.dataType || "").toLowerCase(), d = /(json|script|text)/.test(c); if (d || h.textarea) { var u = L.getElementsByTagName("textarea")[0]; if (u) w.responseText = u.value, w.status = Number(u.getAttribute("status")) || w.status, w.statusText = u.getAttribute("statusText") || w.statusText; else if (d) { var f = L.getElementsByTagName("pre")[0], p = L.getElementsByTagName("body")[0]; f ? w.responseText = f.textContent ? f.textContent : f.innerText : p && (w.responseText = p.textContent ? p.textContent : p.innerText) } } else "xml" == c && !w.responseXML && w.responseText && (w.responseXML = N(w.responseText)); try { j = D(w, c, h) } catch (e) { a = "parsererror", w.error = o = e || a } } catch (e) { i("error caught: ", e), a = "error", w.error = o = e || a } w.aborted && (i("upload aborted"), a = null), w.status && (a = w.status >= 200 && w.status < 300 || 304 === w.status ? "success" : "error"), "success" === a ? (h.success && h.success.call(h.context, j, "success", w), k.resolve(w.responseText, "success", w), m && e.event.trigger("ajaxSuccess", [w, h])) : a && (void 0 === o && (o = w.statusText), h.error && h.error.call(h.context, w, a, o), k.reject(w, "error", o), m && e.event.trigger("ajaxError", [w, h, o])), m && e.event.trigger("ajaxComplete", [w, h]), m && !--e.active && e.event.trigger("ajaxStop"), h.complete && h.complete.call(h.context, w, a), A = !0, h.timeout && clearTimeout(_), setTimeout(function () { h.iframeTarget ? g.attr("src", h.iframeSrc) : g.remove(), w.responseXML = null }, 100) } } } var d, u, h, m, p, g, v, w, x, b, y, _, $ = c[0], k = e.Deferred(); if (k.abort = function (e) { w.abort(e) }, o) for (u = 0; u < f.length; u++)d = e(f[u]), a ? d.prop("disabled", !1) : d.removeAttr("disabled"); if ((h = e.extend(!0, {}, e.ajaxSettings, t)).context = h.context || h, p = "jqFormIO" + (new Date).getTime(), h.iframeTarget ? (b = (g = e(h.iframeTarget)).attr2("name")) ? p = b : g.attr2("name", p) : (g = e('<iframe name="' + p + '" src="' + h.iframeSrc + '" />')).css({ position: "absolute", top: "-1000px", left: "-1000px" }), v = g[0], w = { aborted: 0, responseText: null, responseXML: null, status: 0, statusText: "n/a", getAllResponseHeaders: function () { }, getResponseHeader: function () { }, setRequestHeader: function () { }, abort: function (t) { var o = "timeout" === t ? "timeout" : "aborted"; i("aborting upload... " + o), this.aborted = 1; try { v.contentWindow.document.execCommand && v.contentWindow.document.execCommand("Stop") } catch (e) { } g.attr("src", h.iframeSrc), w.error = o, h.error && h.error.call(h.context, w, o, t), m && e.event.trigger("ajaxError", [w, h, o]), h.complete && h.complete.call(h.context, w, o) } }, (m = h.global) && 0 == e.active++ && e.event.trigger("ajaxStart"), m && e.event.trigger("ajaxSend", [w, h]), h.beforeSend && !1 === h.beforeSend.call(h.context, w, h)) return h.global && e.active-- , k.reject(), k; if (w.aborted) return k.reject(), k; (x = $.clk) && ((b = x.name) && !x.disabled && (h.extraData = h.extraData || {}, h.extraData[b] = x.value, "image" == x.type && (h.extraData[b + ".x"] = $.clk_x, h.extraData[b + ".y"] = $.clk_y))); var T = 1, C = 2, S = e("meta[name=csrf-token]").attr("content"), z = e("meta[name=csrf-param]").attr("content"); z && S && (h.extraData = h.extraData || {}, h.extraData[z] = S), h.forceSync ? s() : setTimeout(s, 10); var j, L, A, H = 50, N = e.parseXML || function (e, t) { return window.ActiveXObject ? ((t = new ActiveXObject("Microsoft.XMLDOM")).async = "false", t.loadXML(e)) : t = (new DOMParser).parseFromString(e, "text/xml"), t && t.documentElement && "parsererror" != t.documentElement.nodeName ? t : null }, I = e.parseJSON || function (e) { return window.eval("(" + e + ")") }, D = function (t, o, i) { var n = t.getResponseHeader("content-type") || "", a = "xml" === o || !o && n.indexOf("xml") >= 0, r = a ? t.responseXML : t.responseText; return a && "parsererror" === r.documentElement.nodeName && e.error && e.error("parsererror"), i && i.dataFilter && (r = i.dataFilter(r, o)), "string" == typeof r && ("json" === o || !o && n.indexOf("json") >= 0 ? r = I(r) : ("script" === o || !o && n.indexOf("javascript") >= 0) && e.globalEval(r)), r }; return k } if (!this.length) return i("ajaxSubmit: skipping submit process - no element selected"), this; var r, s, l, c = this; "function" == typeof t ? t = { success: t } : void 0 === t && (t = {}), r = t.type || this.attr2("method"), (l = (l = "string" == typeof (s = t.url || this.attr2("action")) ? e.trim(s) : "") || window.location.href || "") && (l = (l.match(/^([^#]+)/) || [])[1]), t = e.extend(!0, { url: l, success: e.ajaxSettings.success, type: r || e.ajaxSettings.type, iframeSrc: /^https/i.test(window.location.href || "") ? "javascript:false" : "about:blank" }, t); var d = {}; if (this.trigger("form-pre-serialize", [this, t, d]), d.veto) return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"), this; if (t.beforeSerialize && !1 === t.beforeSerialize(this, t)) return i("ajaxSubmit: submit aborted via beforeSerialize callback"), this; var u = t.traditional; void 0 === u && (u = e.ajaxSettings.traditional); var h, f = [], m = this.formToArray(t.semantic, f); if (t.data && (t.extraData = t.data, h = e.param(t.data, u)), t.beforeSubmit && !1 === t.beforeSubmit(m, this, t)) return i("ajaxSubmit: submit aborted via beforeSubmit callback"), this; if (this.trigger("form-submit-validate", [m, this, t, d]), d.veto) return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"), this; var p = e.param(m, u); h && (p = p ? p + "&" + h : h), "GET" == t.type.toUpperCase() ? (t.url += (t.url.indexOf("?") >= 0 ? "&" : "?") + p, t.data = null) : t.data = p; var g = []; if (t.resetForm && g.push(function () { c.resetForm() }), t.clearForm && g.push(function () { c.clearForm(t.includeHidden) }), !t.dataType && t.target) { var v = t.success || function () { }; g.push(function (o) { var i = t.replaceTarget ? "replaceWith" : "html"; e(t.target)[i](o).each(v, arguments) }) } else t.success && g.push(t.success); if (t.success = function (e, o, i) { for (var n = t.context || this, a = 0, r = g.length; r > a; a++)g[a].apply(n, [e, o, i || c, c]) }, t.error) { var w = t.error; t.error = function (e, o, i) { var n = t.context || this; w.apply(n, [e, o, i, c]) } } if (t.complete) { var x = t.complete; t.complete = function (e, o) { var i = t.context || this; x.apply(i, [e, o, c]) } } var b = e("input[type=file]:enabled", this).filter(function () { return "" !== e(this).val() }).length > 0, y = "multipart/form-data", _ = c.attr("enctype") == y || c.attr("encoding") == y, $ = n.fileapi && n.formdata; i("fileAPI :" + $); var k, T = (b || _) && !$; !1 !== t.iframe && (t.iframe || T) ? t.closeKeepAlive ? e.get(t.closeKeepAlive, function () { k = o(m) }) : k = o(m) : k = (b || _) && $ ? function (o) { for (var i = new FormData, n = 0; n < o.length; n++)i.append(o[n].name, o[n].value); if (t.extraData) { var a = function (o) { var i, n, a = e.param(o, t.traditional).split("&"), r = a.length, s = []; for (i = 0; r > i; i++)a[i] = a[i].replace(/\+/g, " "), n = a[i].split("="), s.push([decodeURIComponent(n[0]), decodeURIComponent(n[1])]); return s }(t.extraData); for (n = 0; n < a.length; n++)a[n] && i.append(a[n][0], a[n][1]) } t.data = null; var s = e.extend(!0, {}, e.ajaxSettings, t, { contentType: !1, processData: !1, cache: !1, type: r || "POST" }); t.uploadProgress && (s.xhr = function () { var o = e.ajaxSettings.xhr(); return o.upload && o.upload.addEventListener("progress", function (e) { var o = 0, i = e.loaded || e.position, n = e.total; e.lengthComputable && (o = Math.ceil(i / n * 100)), t.uploadProgress(e, i, n, o) }, !1), o }), s.data = null; var l = s.beforeSend; return s.beforeSend = function (e, o) { o.data = t.formData ? t.formData : i, l && l.call(this, e, o) }, e.ajax(s) }(m) : e.ajax(t), c.removeData("jqxhr").data("jqxhr", k); for (var C = 0; C < f.length; C++)f[C] = null; return this.trigger("form-submit-notify", [this, t]), this }, e.fn.ajaxForm = function (n) { if ((n = n || {}).delegation = n.delegation && e.isFunction(e.fn.on), !n.delegation && 0 === this.length) { var a = { s: this.selector, c: this.context }; return !e.isReady && a.s ? (i("DOM not ready, queuing ajaxForm"), e(function () { e(a.s, a.c).ajaxForm(n) }), this) : (i("terminating; zero elements found by selector" + (e.isReady ? "" : " (DOM not ready)")), this) } return n.delegation ? (e(document).off("submit.form-plugin", this.selector, t).off("click.form-plugin", this.selector, o).on("submit.form-plugin", this.selector, n, t).on("click.form-plugin", this.selector, n, o), this) : this.ajaxFormUnbind().bind("submit.form-plugin", n, t).bind("click.form-plugin", n, o) }, e.fn.ajaxFormUnbind = function () { return this.unbind("submit.form-plugin click.form-plugin") }, e.fn.formToArray = function (t, o) { var i = []; if (0 === this.length) return i; var a, r, s, l, c, d, u, h, f = this[0], m = this.attr("id"), p = t ? f.getElementsByTagName("*") : f.elements; if (p && !/MSIE [678]/.test(navigator.userAgent) && (p = e(p).get()), m && ((a = e(':input[form="' + m + '"]').get()).length && (p = (p || []).concat(a))), !p || !p.length) return i; for (r = 0, u = p.length; u > r; r++)if ((l = (d = p[r]).name) && !d.disabled) if (t && f.clk && "image" == d.type) f.clk == d && (i.push({ name: l, value: e(d).val(), type: d.type }), i.push({ name: l + ".x", value: f.clk_x }, { name: l + ".y", value: f.clk_y })); else if ((c = e.fieldValue(d, !0)) && c.constructor == Array) for (o && o.push(d), s = 0, h = c.length; h > s; s++)i.push({ name: l, value: c[s] }); else if (n.fileapi && "file" == d.type) { o && o.push(d); var g = d.files; if (g.length) for (s = 0; s < g.length; s++)i.push({ name: l, value: g[s], type: d.type }); else i.push({ name: l, value: "", type: d.type }) } else null != c && (o && o.push(d), i.push({ name: l, value: c, type: d.type, required: d.required })); if (!t && f.clk) { var v = e(f.clk), w = v[0]; (l = w.name) && !w.disabled && "image" == w.type && (i.push({ name: l, value: v.val() }), i.push({ name: l + ".x", value: f.clk_x }, { name: l + ".y", value: f.clk_y })) } return i }, e.fn.formSerialize = function (t) { return e.param(this.formToArray(t)) }, e.fn.fieldSerialize = function (t) { var o = []; return this.each(function () { var i = this.name; if (i) { var n = e.fieldValue(this, t); if (n && n.constructor == Array) for (var a = 0, r = n.length; r > a; a++)o.push({ name: i, value: n[a] }); else null != n && o.push({ name: this.name, value: n }) } }), e.param(o) }, e.fn.fieldValue = function (t) { for (var o = [], i = 0, n = this.length; n > i; i++) { var a = this[i], r = e.fieldValue(a, t); null == r || r.constructor == Array && !r.length || (r.constructor == Array ? e.merge(o, r) : o.push(r)) } return o }, e.fieldValue = function (t, o) { var i = t.name, n = t.type, a = t.tagName.toLowerCase(); if (void 0 === o && (o = !0), o && (!i || t.disabled || "reset" == n || "button" == n || ("checkbox" == n || "radio" == n) && !t.checked || ("submit" == n || "image" == n) && t.form && t.form.clk != t || "select" == a && -1 == t.selectedIndex)) return null; if ("select" == a) { var r = t.selectedIndex; if (0 > r) return null; for (var s = [], l = t.options, c = "select-one" == n, d = c ? r + 1 : l.length, u = c ? r : 0; d > u; u++) { var h = l[u]; if (h.selected) { var f = h.value; if (f || (f = h.attributes && h.attributes.value && !h.attributes.value.specified ? h.text : h.value), c) return f; s.push(f) } } return s } return e(t).val() }, e.fn.clearForm = function (t) { return this.each(function () { e("input,select,textarea", this).clearFields(t) }) }, e.fn.clearFields = e.fn.clearInputs = function (t) { var o = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; return this.each(function () { var i = this.type, n = this.tagName.toLowerCase(); o.test(i) || "textarea" == n ? this.value = "" : "checkbox" == i || "radio" == i ? this.checked = !1 : "select" == n ? this.selectedIndex = -1 : "file" == i ? /MSIE/.test(navigator.userAgent) ? e(this).replaceWith(e(this).clone(!0)) : e(this).val("") : t && (!0 === t && /hidden/.test(i) || "string" == typeof t && e(this).is(t)) && (this.value = "") }) }, e.fn.resetForm = function () { return this.each(function () { ("function" == typeof this.reset || "object" == typeof this.reset && !this.reset.nodeType) && this.reset() }) }, e.fn.enable = function (e) { return void 0 === e && (e = !0), this.each(function () { this.disabled = !e }) }, e.fn.selected = function (t) { return void 0 === t && (t = !0), this.each(function () { var o = this.type; if ("checkbox" == o || "radio" == o) this.checked = t; else if ("option" == this.tagName.toLowerCase()) { var i = e(this).parent("select"); t && i[0] && "select-one" == i[0].type && i.find("option").selected(!1), this.selected = t } }) }, e.fn.ajaxSubmit.debug = !1 }), function (e, t, o) { function i(o, i, n) { var a = t.createElement(o); return i && (a.id = J + i), n && (a.style.cssText = n), e(a) } function n() { return o.innerHeight ? o.innerHeight : e(o).height() } function a(t, o) { o !== Object(o) && (o = {}), this.cache = {}, this.el = t, this.value = function (t) { var i; return void 0 === this.cache[t] && (void 0 !== (i = e(this.el).attr("data-cbox-" + t)) ? this.cache[t] = i : void 0 !== o[t] ? this.cache[t] = o[t] : void 0 !== Q[t] && (this.cache[t] = Q[t])), this.cache[t] }, this.get = function (t) { var o = this.value(t); return e.isFunction(o) ? o.call(this.el, this) : o } } function r(e) { var t = T.length, o = (G + e) % t; return 0 > o ? t + o : o } function s(e, t) { return Math.round((/%/.test(e) ? ("x" === t ? C.width() : n()) / 100 : 1) * parseInt(e, 10)) } function l(e, t) { return e.get("photo") || e.get("photoRegex").test(t) } function c(e, t) { return e.get("retinaUrl") && o.devicePixelRatio > 1 ? t.replace(e.get("photoRegex"), e.get("retinaSuffix")) : t } function d(e) { "contains" in w[0] && !w[0].contains(e.target) && e.target !== v[0] && (e.stopPropagation(), w.focus()) } function u(e) { u.str !== e && (w.add(v).removeClass(u.str).addClass(e), u.str = e) } function h(o) { e(t).trigger(o), re.triggerHandler(o) } function f(o) { var n; if (!q) { if (n = e(o).data(V), function (t) { G = 0, t && !1 !== t && "nofollow" !== t ? (T = e("." + Z).filter(function () { return new a(this, e.data(this, V)).get("rel") === t }), -1 === (G = T.index(R.el)) && (T = T.add(R.el), G = T.length - 1)) : T = e(R.el) }((R = new a(o, n)).get("rel")), !X) { X = P = !0, u(R.get("className")), w.css({ visibility: "hidden", display: "block", opacity: "" }), S = i(se, "LoadedContent", "width:0; height:0; overflow:hidden; visibility:hidden"), b.css({ width: "", height: "" }).append(S), O = y.height() + k.height() + b.outerHeight(!0) - b.height(), M = _.width() + $.width() + b.outerWidth(!0) - b.width(), W = S.outerHeight(!0), F = S.outerWidth(!0); var r = s(R.get("initialWidth"), "x"), l = s(R.get("initialHeight"), "y"), c = R.get("maxWidth"), f = R.get("maxHeight"); R.w = Math.max((!1 !== c ? Math.min(r, s(c, "x")) : r) - F - M, 0), R.h = Math.max((!1 !== f ? Math.min(l, s(f, "y")) : l) - W - O, 0), S.css({ width: "", height: R.h }), Y.position(), h(ee), R.get("onOpen"), E.add(L).hide(), w.focus(), R.get("trapFocus") && t.addEventListener && (t.addEventListener("focus", d, !0), re.one(ne, function () { t.removeEventListener("focus", d, !0) })), R.get("returnFocus") && re.one(ne, function () { e(R.el).focus() }) } var m = parseFloat(R.get("opacity")); v.css({ opacity: m == m ? m : "", cursor: R.get("overlayClose") ? "pointer" : "", visibility: "visible" }).show(), R.get("closeButton") ? D.html(R.get("close")).appendTo(b) : D.appendTo("<div/>"), g() } } function m() { w || (K = !1, C = e(o), w = i(se).attr({ id: V, class: !1 === e.support.opacity ? J + "IE" : "", role: "dialog", tabindex: "-1" }).hide(), v = i(se, "Overlay").hide(), j = e([i(se, "LoadingOverlay")[0], i(se, "LoadingGraphic")[0]]), x = i(se, "Wrapper"), b = i(se, "Content").append(L = i(se, "Title"), A = i(se, "Current"), I = e('<button type="button"/>').attr({ id: J + "Previous" }), N = e('<button type="button"/>').attr({ id: J + "Next" }), H = e('<button type="button"/>').attr({ id: J + "Slideshow" }), j), D = e('<button type="button"/>').attr({ id: J + "Close" }), x.append(i(se).append(i(se, "TopLeft"), y = i(se, "TopCenter"), i(se, "TopRight")), i(se, !1, "clear:left").append(_ = i(se, "MiddleLeft"), b, $ = i(se, "MiddleRight")), i(se, !1, "clear:left").append(i(se, "BottomLeft"), k = i(se, "BottomCenter"), i(se, "BottomRight"))).find("div div").css({ float: "left" }), z = i(se, !1, "position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"), E = N.add(I).add(A).add(H)), t.body && !w.parent().length && e(t.body).append(v, w.append(x, z)) } function p() { function o(e) { e.which > 1 || e.shiftKey || e.altKey || e.metaKey || e.ctrlKey || (e.preventDefault(), f(this)) } return !!w && (K || (K = !0, N.click(function () { Y.next() }), I.click(function () { Y.prev() }), D.click(function () { Y.close() }), v.click(function () { R.get("overlayClose") && Y.close() }), e(t).bind("keydown." + J, function (e) { var t = e.keyCode; X && R.get("escKey") && 27 === t && (e.preventDefault(), Y.close()), X && R.get("arrowKey") && T[1] && !e.altKey && (37 === t ? (e.preventDefault(), I.click()) : 39 === t && (e.preventDefault(), N.click())) }), e.isFunction(e.fn.on) ? e(t).on("click." + J, "." + Z, o) : e("." + Z).live("click." + J, o)), !0) } function g() { var t, n, a, r = Y.prep, d = ++le; if (P = !0, B = !1, h(ae), h(te), R.get("onLoad"), R.h = R.get("height") ? s(R.get("height"), "y") - W - O : R.get("innerHeight") && s(R.get("innerHeight"), "y"), R.w = R.get("width") ? s(R.get("width"), "x") - F - M : R.get("innerWidth") && s(R.get("innerWidth"), "x"), R.mw = R.w, R.mh = R.h, R.get("maxWidth") && (R.mw = s(R.get("maxWidth"), "x") - F - M, R.mw = R.w && R.w < R.mw ? R.w : R.mw), R.get("maxHeight") && (R.mh = s(R.get("maxHeight"), "y") - W - O, R.mh = R.h && R.h < R.mh ? R.h : R.mh), t = R.get("href"), U = setTimeout(function () { j.show() }, 100), R.get("inline")) { var u = e(t).eq(0); a = e("<div>").hide().insertBefore(u), re.one(ae, function () { a.replaceWith(u) }), r(u) } else R.get("iframe") ? r(" ") : R.get("html") ? r(R.get("html")) : l(R, t) ? (t = c(R, t), B = R.get("createImg"), e(B).addClass(J + "Photo").bind("error." + J, function () { r(i(se, "Error").html(R.get("imgError"))) }).one("load", function () { d === le && setTimeout(function () { var t; R.get("retinaImage") && o.devicePixelRatio > 1 && (B.height = B.height / o.devicePixelRatio, B.width = B.width / o.devicePixelRatio), R.get("scalePhotos") && (n = function () { B.height -= B.height * t, B.width -= B.width * t }, R.mw && B.width > R.mw && (t = (B.width - R.mw) / B.width, n()), R.mh && B.height > R.mh && (t = (B.height - R.mh) / B.height, n())), R.h && (B.style.marginTop = Math.max(R.mh - B.height, 0) / 2 + "px"), T[1] && (R.get("loop") || T[G + 1]) && (B.style.cursor = "pointer", e(B).bind("click." + J, function () { Y.next() })), B.style.width = B.width + "px", B.style.height = B.height + "px", r(B) }, 1) }), B.src = t) : t && z.load(t, R.get("data"), function (t, o) { d === le && r("error" === o ? i(se, "Error").html(R.get("xhrError")) : e(this).contents()) }) } var v, w, x, b, y, _, $, k, T, C, S, z, j, L, A, H, N, I, D, E, R, O, M, W, F, G, B, X, P, q, U, Y, K, Q = { html: !1, photo: !1, iframe: !1, inline: !1, transition: "elastic", speed: 300, fadeOut: 300, width: !1, initialWidth: "600", innerWidth: !1, maxWidth: !1, height: !1, initialHeight: "450", innerHeight: !1, maxHeight: !1, scalePhotos: !0, scrolling: !0, opacity: .9, preloading: !0, className: !1, overlayClose: !0, escKey: !0, arrowKey: !0, top: !1, bottom: !1, left: !1, right: !1, fixed: !1, data: void 0, closeButton: !0, fastIframe: !0, open: !1, reposition: !0, loop: !0, slideshow: !1, slideshowAuto: !0, slideshowSpeed: 2500, slideshowStart: "start slideshow", slideshowStop: "stop slideshow", photoRegex: /\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i, retinaImage: !1, retinaUrl: !1, retinaSuffix: "@2x.$1", current: "image {current} of {total}", previous: "previous", next: "next", close: "close", xhrError: "This content failed to load.", imgError: "This image failed to load.", returnFocus: !0, trapFocus: !0, onOpen: !1, onLoad: !1, onComplete: !1, onCleanup: !1, onClosed: !1, rel: function () { return this.rel }, href: function () { return e(this).attr("href") }, title: function () { return this.title }, createImg: function () { var t = new Image, o = e(this).data("cbox-img-attrs"); return "object" == typeof o && e.each(o, function (e, o) { t[e] = o }), t }, createIframe: function () { var o = t.createElement("iframe"), i = e(this).data("cbox-iframe-attrs"); return "object" == typeof i && e.each(i, function (e, t) { o[e] = t }), "frameBorder" in o && (o.frameBorder = 0), "allowTransparency" in o && (o.allowTransparency = "true"), o.name = (new Date).getTime(), o.allowFullscreen = !0, o } }, V = "colorbox", J = "cbox", Z = J + "Element", ee = J + "_open", te = J + "_load", oe = J + "_complete", ie = J + "_cleanup", ne = J + "_closed", ae = J + "_purge", re = e("<a/>"), se = "div", le = 0, ce = {}, de = function () { function e() { clearTimeout(r) } function t() { (R.get("loop") || T[G + 1]) && (e(), r = setTimeout(Y.next, R.get("slideshowSpeed"))) } function o() { H.html(R.get("slideshowStop")).unbind(l).one(l, i), re.bind(oe, t).bind(te, e), w.removeClass(s + "off").addClass(s + "on") } function i() { e(), re.unbind(oe, t).unbind(te, e), H.html(R.get("slideshowStart")).unbind(l).one(l, function () { Y.next(), o() }), w.removeClass(s + "on").addClass(s + "off") } function n() { a = !1, H.hide(), e(), re.unbind(oe, t).unbind(te, e), w.removeClass(s + "off " + s + "on") } var a, r, s = J + "Slideshow_", l = "click." + J; return function () { a ? R.get("slideshow") || (re.unbind(ie, n), n()) : R.get("slideshow") && T[1] && (a = !0, re.one(ie, n), R.get("slideshowAuto") ? o() : i(), H.show()) } }(); e[V] || (e(m), (Y = e.fn[V] = e[V] = function (t, o) { var i = this; return t = t || {}, e.isFunction(i) && (i = e("<a/>"), t.open = !0), i[0] ? (m(), p() && (o && (t.onComplete = o), i.each(function () { var o = e.data(this, V) || {}; e.data(this, V, e.extend(o, t)) }).addClass(Z), new a(i[0], t).get("open") && f(i[0])), i) : i }).position = function (t, o) { function i() { y[0].style.width = k[0].style.width = b[0].style.width = parseInt(w[0].style.width, 10) - M + "px", b[0].style.height = _[0].style.height = $[0].style.height = parseInt(w[0].style.height, 10) - O + "px" } var a, r, l, c = 0, d = 0, u = w.offset(); if (C.unbind("resize." + J), w.css({ top: -9e4, left: -9e4 }), r = C.scrollTop(), l = C.scrollLeft(), R.get("fixed") ? (u.top -= r, u.left -= l, w.css({ position: "fixed" })) : (c = r, d = l, w.css({ position: "absolute" })), d += !1 !== R.get("right") ? Math.max(C.width() - R.w - F - M - s(R.get("right"), "x"), 0) : !1 !== R.get("left") ? s(R.get("left"), "x") : Math.round(Math.max(C.width() - R.w - F - M, 0) / 2), c += !1 !== R.get("bottom") ? Math.max(n() - R.h - W - O - s(R.get("bottom"), "y"), 0) : !1 !== R.get("top") ? s(R.get("top"), "y") : Math.round(Math.max(n() - R.h - W - O, 0) / 2), w.css({ top: u.top, left: u.left, visibility: "visible" }), x[0].style.width = x[0].style.height = "9999px", a = { width: R.w + F + M, height: R.h + W + O, top: c, left: d }, t) { var h = 0; e.each(a, function (e) { return a[e] !== ce[e] ? void (h = t) : void 0 }), t = h } ce = a, t || w.css(a), w.dequeue().animate(a, { duration: t || 0, complete: function () { i(), P = !1, x[0].style.width = R.w + F + M + "px", x[0].style.height = R.h + W + O + "px", R.get("reposition") && setTimeout(function () { C.bind("resize." + J, Y.position) }, 1), e.isFunction(o) && o() }, step: i }) }, Y.resize = function (e) { var t; X && ((e = e || {}).width && (R.w = s(e.width, "x") - F - M), e.innerWidth && (R.w = s(e.innerWidth, "x")), S.css({ width: R.w }), e.height && (R.h = s(e.height, "y") - W - O), e.innerHeight && (R.h = s(e.innerHeight, "y")), e.innerHeight || e.height || (t = S.scrollTop(), S.css({ height: "auto" }), R.h = S.height()), S.css({ height: R.h }), t && S.scrollTop(t), Y.position("none" === R.get("transition") ? 0 : R.get("speed"))) }, Y.prep = function (o) { if (X) { var n, s = "none" === R.get("transition") ? 0 : R.get("speed"); S.remove(), (S = i(se, "LoadedContent").append(o)).hide().appendTo(z.show()).css({ width: (R.w = R.w || S.width(), R.w = R.mw && R.mw < R.w ? R.mw : R.w, R.w), overflow: R.get("scrolling") ? "auto" : "hidden" }).css({ height: (R.h = R.h || S.height(), R.h = R.mh && R.mh < R.h ? R.mh : R.h, R.h) }).prependTo(b), z.hide(), e(B).css({ float: "none" }), u(R.get("className")), n = function () { function o() { !1 === e.support.opacity && w[0].style.removeAttribute("filter") } var i, n, d = T.length; X && (n = function () { clearTimeout(U), j.hide(), h(oe), R.get("onComplete") }, L.html(R.get("title")).show(), S.show(), d > 1 ? ("string" == typeof R.get("current") && A.html(R.get("current").replace("{current}", G + 1).replace("{total}", d)).show(), N[R.get("loop") || d - 1 > G ? "show" : "hide"]().html(R.get("next")), I[R.get("loop") || G ? "show" : "hide"]().html(R.get("previous")), de(), R.get("preloading") && e.each([r(-1), r(1)], function () { var o = T[this], i = new a(o, e.data(o, V)), n = i.get("href"); n && l(i, n) && (n = c(i, n), t.createElement("img").src = n) })) : E.hide(), R.get("iframe") ? (i = R.get("createIframe"), R.get("scrolling") || (i.scrolling = "no"), e(i).attr({ src: R.get("href"), class: J + "Iframe" }).one("load", n).appendTo(S), re.one(ae, function () { i.src = "//about:blank" }), R.get("fastIframe") && e(i).trigger("load")) : n(), "fade" === R.get("transition") ? w.fadeTo(s, 1, o) : o()) }, "fade" === R.get("transition") ? w.fadeTo(s, 0, function () { Y.position(0, n) }) : Y.position(s, n) } }, Y.next = function () { !P && T[1] && (R.get("loop") || T[G + 1]) && (G = r(1), f(T[G])) }, Y.prev = function () { !P && T[1] && (R.get("loop") || G) && (G = r(-1), f(T[G])) }, Y.close = function () { X && !q && (q = !0, X = !1, h(ie), R.get("onCleanup"), C.unbind("." + J), v.fadeTo(R.get("fadeOut") || 0, 0), w.stop().fadeTo(R.get("fadeOut") || 0, 0, function () { w.hide(), v.hide(), h(ae), S.remove(), setTimeout(function () { q = !1, h(ne), R.get("onClosed") }, 1) })) }, Y.remove = function () { w && (w.stop(), e[V].close(), w.stop(!1, !0).remove(), v.remove(), q = !1, w = null, e("." + Z).removeData(V).removeClass(Z), e(t).unbind("click." + J).unbind("keydown." + J)) }, Y.element = function () { return e(R.el) }, Y.settings = Q) }(jQuery, document, window), function (e) { var t, o = { className: "autosizejs", id: "autosizejs", append: "\n", callback: !1, resizeDelay: 10, placeholder: !0 }, i = ["fontFamily", "fontSize", "fontWeight", "fontStyle", "letterSpacing", "textTransform", "wordSpacing", "textIndent", "whiteSpace"], n = e('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize", !0)[0]; n.style.lineHeight = "99px", "99px" === e(n).css("lineHeight") && i.push("lineHeight"), n.style.lineHeight = "", e.fn.autosize = function (a) { return this.length ? (a = e.extend({}, o, a || {}), n.parentNode !== document.body && e(document.body).append(n), this.each(function () { function o() { var t, o = !!window.getComputedStyle && window.getComputedStyle(h, null); o ? ((0 === (t = h.getBoundingClientRect().width) || "number" != typeof t) && (t = parseFloat(o.width)), e.each(["paddingLeft", "paddingRight", "borderLeftWidth", "borderRightWidth"], function (e, i) { t -= parseFloat(o[i]) })) : t = f.width(), n.style.width = Math.max(t, 0) + "px" } function r() { var r = {}; if (t = h, n.className = a.className, n.id = a.id, c = parseFloat(f.css("maxHeight")), e.each(i, function (e, t) { r[t] = f.css(t) }), e(n).css(r).attr("wrap", f.attr("wrap")), o(), window.chrome) { var s = h.style.width; h.style.width = "0px", h.offsetWidth, h.style.width = s } } function s() { var e, i; t !== h ? r() : o(), n.value = !h.value && a.placeholder ? f.attr("placeholder") || "" : h.value, n.value += a.append || "", n.style.overflowY = h.style.overflowY, i = parseFloat(h.style.height), n.scrollTop = 0, n.scrollTop = 9e4, e = n.scrollTop, c && e > c ? (h.style.overflowY = "scroll", e = c) : (h.style.overflowY = "hidden", d > e && (e = d)), i !== (e += m) && (h.style.height = e + "px", n.className = n.className, p && a.callback.call(h, h), f.trigger("autosize.resized")) } function l() { clearTimeout(u), u = setTimeout(function () { var e = f.width(); e !== v && (v = e, s()) }, parseInt(a.resizeDelay, 10)) } var c, d, u, h = this, f = e(h), m = 0, p = e.isFunction(a.callback), g = { height: h.style.height, overflow: h.style.overflow, overflowY: h.style.overflowY, wordWrap: h.style.wordWrap, resize: h.style.resize }, v = f.width(), w = f.css("resize"); f.data("autosize") || (f.data("autosize", !0), ("border-box" === f.css("box-sizing") || "border-box" === f.css("-moz-box-sizing") || "border-box" === f.css("-webkit-box-sizing")) && (m = f.outerHeight() - f.height()), d = Math.max(parseFloat(f.css("minHeight")) - m || 0, f.height()), f.css({ overflow: "hidden", overflowY: "hidden", wordWrap: "break-word" }), "vertical" === w ? f.css("resize", "none") : "both" === w && f.css("resize", "horizontal"), "onpropertychange" in h ? "oninput" in h ? f.on("input.autosize keyup.autosize", s) : f.on("propertychange.autosize", function () { "value" === event.propertyName && s() }) : f.on("input.autosize", s), !1 !== a.resizeDelay && e(window).on("resize.autosize", l), f.on("autosize.resize", s), f.on("autosize.resizeIncludeStyle", function () { t = null, s() }), f.on("autosize.destroy", function () { t = null, clearTimeout(u), e(window).off("resize", l), f.off("autosize").off(".autosize").css(g).removeData("autosize") }), s()) })) : this } }(jQuery || $), jQuery.fn.caret = function (e) { var t = this[0], o = "true" === t.contentEditable; if (0 == arguments.length) { if (window.getSelection) return o ? (t.focus(), (n = (i = window.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(t), n.setEnd(i.endContainer, i.endOffset), n.toString().length) : t.selectionStart; if (document.selection) { if (t.focus(), o) { var i = document.selection.createRange(); return (n = document.body.createTextRange()).moveToElementText(t), n.setEndPoint("EndToEnd", i), n.text.length } e = 0; var n, a = t.createTextRange(), r = (n = document.selection.createRange().duplicate()).getBookmark(); for (a.moveToBookmark(r); 0 !== a.moveStart("character", -1);)e++; return e } return 0 } return -1 == e && (e = this[o ? "text" : "val"]().length), window.getSelection ? o ? (t.focus(), window.getSelection().collapse(t.firstChild, e)) : t.setSelectionRange(e, e) : document.body.createTextRange && (o ? ((a = document.body.createTextRange()).moveToElementText(t), a.moveStart("character", e), a.collapse(!0), a.select()) : ((a = t.createTextRange()).move("character", e), a.select())), o || t.focus(), e }, function (e) { e.fn.autoComplete = function (t) { var o = e.extend({}, e.fn.autoComplete.defaults, t); return "string" == typeof t ? (this.each(function () { var o = e(this); "destroy" == t && (e(window).off("resize.autocomplete", o.updateSC), o.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"), o.data("autocomplete") ? o.attr("autocomplete", o.data("autocomplete")) : o.removeAttr("autocomplete"), e(o.data("sc")).remove(), o.removeData("sc").removeData("autocomplete")) }), this) : this.each(function () { function t(e) { var t = i.val(); if (i.cache[t] = e, e.length && t.length >= o.minChars) { for (var n = "", a = 0; a < e.length; a++)n += o.renderItem(e[a], t); i.sc.html(n), i.updateSC(0) } else i.sc.hide() } var i = e(this); i.sc = e('<div class="autocomplete-suggestions ' + o.menuClass + '"></div>'), i.data("sc", i.sc).data("autocomplete", i.attr("autocomplete")), i.attr("autocomplete", "off"), i.cache = {}, i.last_val = "", i.updateSC = function (t, o) { if (i.sc.css({ top: i.offset().top + i.outerHeight(), left: i.offset().left, width: i.outerWidth() + 17 }), !t && (i.sc.show(), i.sc.maxHeight || (i.sc.maxHeight = parseInt(i.sc.css("max-height"))), i.sc.suggestionHeight || (i.sc.suggestionHeight = e(".autocomplete-suggestion", i.sc).first().outerHeight()), i.sc.suggestionHeight)) if (o) { var n = i.sc.scrollTop(), a = o.offset().top - i.sc.offset().top; a + i.sc.suggestionHeight - i.sc.maxHeight > 0 ? i.sc.scrollTop(a + i.sc.suggestionHeight + n - i.sc.maxHeight) : 0 > a && i.sc.scrollTop(a + n) } else i.sc.scrollTop(0) }, e(window).on("resize.autocomplete", i.updateSC), i.sc.appendTo("body"), i.sc.on("mouseleave", ".autocomplete-suggestion", function () { e(".autocomplete-suggestion.selected").removeClass("selected") }), i.sc.on("mouseenter", ".autocomplete-suggestion", function () { e(".autocomplete-suggestion.selected").removeClass("selected"), e(this).addClass("selected") }), i.sc.on("mousedown", ".autocomplete-suggestion", function (t) { var n = e(this), a = n.data("val"); return (a || n.hasClass("autocomplete-suggestion")) && (i.val(a), o.onSelect(t, a, n), i.sc.hide()), !1 }), i.on("blur.autocomplete", function () { try { over_sb = e(".autocomplete-suggestions:hover").length } catch (e) { over_sb = 0 } over_sb ? i.is(":focus") || setTimeout(function () { i.focus() }, 20) : (i.last_val = i.val(), i.sc.hide(), setTimeout(function () { i.sc.hide() }, 350)) }), o.minChars || i.on("focus.autocomplete", function () { i.last_val = "\n", i.trigger("keyup.autocomplete") }), i.on("keydown.autocomplete", function (t) { var n; if ((40 == t.which || 38 == t.which) && i.sc.html()) return (a = e(".autocomplete-suggestion.selected", i.sc)).length ? (n = 40 == t.which ? a.next(".autocomplete-suggestion") : a.prev(".autocomplete-suggestion")).length ? (a.removeClass("selected"), i.val(n.addClass("selected").data("val"))) : (a.removeClass("selected"), i.val(i.last_val), n = 0) : (n = 40 == t.which ? e(".autocomplete-suggestion", i.sc).first() : e(".autocomplete-suggestion", i.sc).last(), i.val(n.addClass("selected").data("val"))), i.updateSC(0, n), !1; if (27 == t.which) i.val(i.last_val).sc.hide(); else if (13 == t.which || 9 == t.which) { var a; (a = e(".autocomplete-suggestion.selected", i.sc)).length && i.sc.is(":visible") && (o.onSelect(t, a.data("val"), a), setTimeout(function () { i.sc.hide() }, 20)) } }), i.on("keyup.autocomplete", function (n) { if (!~e.inArray(n.which, [13, 27, 35, 36, 37, 38, 39, 40])) { var a = i.val(); if (a.length >= o.minChars) { if (a != i.last_val) { if (i.last_val = a, clearTimeout(i.timer), o.cache) { if (a in i.cache) return void t(i.cache[a]); for (var r = 1; r < a.length - o.minChars; r++) { var s = a.slice(0, a.length - r); if (s in i.cache && !i.cache[s].length) return void t([]) } } i.timer = setTimeout(function () { o.source(a, t) }, o.delay) } } else i.last_val = a, i.sc.hide() } }) }) }, e.fn.autoComplete.defaults = { source: 0, minChars: 3, delay: 150, cache: 1, menuClass: "", renderItem: function (e, t) { t = t.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"); var o = new RegExp("(" + t.split(" ").join("|") + ")", "gi"); return '<div class="autocomplete-suggestion" data-val="' + e + '">' + e.replace(o, "<b>$1</b>") + "</div>" }, onSelect: function (e, t, o) { } } }(jQuery), function (e) { function t(e, o, n, a) { function r(e) { n.maxRows && d > n.maxRows || n.truncate && e && d > 1 ? f[s][0].style.display = "none" : (f[s][4] && (f[s][3].attr("src", f[s][4]), f[s][4] = ""), f[s][0].style.width = l + "px", f[s][0].style.height = p + "px", f[s][0].style.display = "block") } var s, l, c = 1, d = 1, u = e.width() - 2, f = [], m = 0, p = n.rowHeight; for (u || (u = e.width() - 2), i = 0; i < o.length; i++)if (f.push(o[i]), (m += o[i][2] + n.margin) >= u) { var g = f.length * n.margin; for (c = (u - g) / (m - g), p = Math.ceil(n.rowHeight * c), exact_w = 0, s = 0; s < f.length; s++)l = Math.ceil(f[s][2] * c), exact_w += l + n.margin, exact_w > u && (l -= exact_w - u), r(); f = [], m = 0, d++ } for (s = 0; s < f.length; s++)l = Math.floor(f[s][2] * c), h = Math.floor(n.rowHeight * c), r(!0); a || u == e.width() || t(e, o, n, !0) } e.fn.flexImages = function (o) { var i = e.extend({ container: ".item", object: "img", rowHeight: 180, maxRows: 0, truncate: 0 }, o); return this.each(function () { var o = e(this), n = e(o).find(i.container), a = [], r = (new Date).getTime(), s = window.getComputedStyle ? getComputedStyle(n[0], null) : n[0].currentStyle; for (i.margin = (parseInt(s.marginLeft) || 0) + (parseInt(s.marginRight) || 0) + (Math.round(parseFloat(s.borderLeftWidth)) || 0) + (Math.round(parseFloat(s.borderRightWidth)) || 0), j = 0; j < n.length; j++) { var l = n[j], c = parseInt(l.getAttribute("data-w")), d = c * (i.rowHeight / parseInt(l.getAttribute("data-h"))), u = e(l).find(i.object); a.push([l, c, d, u, u.data("src")]) } t(o, a, i), e(window).off("resize.flexImages" + o.data("flex-t")), e(window).on("resize.flexImages" + r, function () { t(o, a, i) }), o.data("flex-t", r) }) } }(jQuery), function (e) { e.fn.unveil = function (t) { function o() { var t = r.filter(function () { var t = e(this); if (!t.is(":hidden")) { var o = n.scrollTop(), i = o + n.height(), r = t.offset().top; return r + t.height() >= o - a && i + a >= r } }); i = t.trigger("unveil"), r = r.not(i) } var i, n = e(window), a = t || 0, r = this; return this.one("unveil", function () { var e = this.getAttribute("data-lazy"), t = this.getAttribute("data-lazy-srcset"); e && this.setAttribute("src", e), t && this.setAttribute("srcset", t) }), n.on("scroll.unveil resize.unveil lookup.unveil", o), o(), this } }(window.jQuery), String.prototype.rsplit = function (e, t) { var o = this.split(e); return t ? [o.slice(0, -t).join(e)].concat(o.slice(-t)) : o }, window.linkify = function () { var e = "[a-z\\d.-]+://", t = "mailto:", o = new RegExp("(?:\\b[a-z\\d.-]+://[^<>\\s]+|\\b(?:(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+(?:at|biz|com|ch|co|de|edu|es|eu|fr|gov|info|it|ly|me|mobi|nl|net|org|to|uk|us|ws)|(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))(?:[;/][^#?<>\\s]*)?(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?(?!\\w)|(?:mailto:)?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+(?:at|biz|com|ch|co|de|edu|es|eu|fr|gov|info|it|ly|me|mobi|nl|net|org|to|uk|us|ws)|(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?(?!\\w))", "ig"), i = new RegExp("^" + e, "i"), n = { "'": "`", ">": "<", ")": "(", "]": "[", "}": "{", "»": "«", "›": "‹" }; return function (e, a) { a = a || {}; for (var r, s, l, c, d, u, h, f, m, p, g, v, w = "", x = []; r = o.exec(e);)if (l = r[0], h = (u = o.lastIndex) - l.length, !/[\/:]/.test(e.charAt(h - 1))) { do { f = l, v = l.substr(-1), (g = n[v]) && (m = l.match(new RegExp("\\" + g + "(?!$)", "g")), p = l.match(new RegExp("\\" + v, "g")), (m ? m.length : 0) < (p ? p.length : 0) && (l = l.substr(0, l.length - 1), u--)), l = l.replace(/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/, function (e) { return u -= e.length, "" }) } while (l.length && l !== f); c = l, i.test(c) || (c = (-1 !== c.indexOf("@") ? c.indexOf(t) ? t : "" : c.indexOf("irc.") ? c.indexOf("ftp.") ? "http://" : "ftp://" : "irc://") + c), d != h && (x.push([e.slice(d, h)]), d = u), x.push([l, c]) } for (x.push([e.substr(d)]), s = 0; s < x.length; s++)text = x[s][0], c = x[s][1], target = text.indexOf(window.location.hostname) >= 0 ? "" : 'target="_blank" ', w += c ? "<a " + target + 'href="' + c + '">' + text + "</a>" : text; return w || e } }(), getCookie("is_human") ? is_human = !0 : ($(document).one("keydown", "input[type=text]", function () { setCookie("is_human", 1, 864e4), is_human = !0 }), $(document).one("mousemove", function () { setCookie("is_human", 1, 864e4), is_human = !0 })), "ontouchstart" in window ? (is_human = !0, $(".pure-dropdown>a").click(function (e) { var t = (pure_menu = $(this).parent()).toggleClass("pure-menu-open").find(".pure-menu-children").css("top", pure_menu.height()); return pure_menu.offset().left + t.outerWidth() > ww && ww > t.outerWidth() ? t.css("left", pure_menu.width() - t.outerWidth()) : t.css("left", 0), !1 }), $(document).mousedown(function (e) { !pure_menu || pure_menu.is(e.target) || pure_menu.has(e.target).length || ($(".pure-dropdown").removeClass("pure-menu-open"), pure_menu = !1) })) : ($(".pure-dropdown>a").mouseenter(function (e) { var t = (pure_menu = $(this).parent()).toggleClass("pure-menu-open").find(".pure-menu-children").css("top", pure_menu.height()); return pure_menu.offset().left + t.outerWidth() > ww && ww > t.outerWidth() ? t.css("left", pure_menu.width() - t.outerWidth()) : t.css("left", 0), !1 }), $(".pure-dropdown").mouseleave(function () { $(this).removeClass("pure-menu-open"), pure_menu = !1 })); var mm = $("#mobile_menu"), mum = $("#mobile_user_menu"); $(".mm_inc").each(function () { mm.append($(this).clone()), $(this).hasClass("mm_sep") && mm.append('<li class="pure-menu-separator"></li>') }), $(".mum_inc").each(function () { mum.append($(this).clone().removeClass("hide-xs hide-sm hide-md")) }); var ajax_anim = !1, loadingBar = $('<div id="loadingBar"><dt></dt><dd></dd></div>'); loadingBar.appendTo("body").hide(), $.ajaxSetup({ beforeSend: function () { ajax_anim && (loadingBar.css("width", 0), loadingBar.show()) }, error: function () { ajax_anim && loadingBar.css("width", "102%").addClass("error").fadeOut(2e3, function () { loadingBar.removeClass("error").hide() }) }, complete: function (e, t) { "error" != t && loadingBar.hide(), ajax_anim = !1 }, xhr: function () { var e = new window.XMLHttpRequest; try { e.upload.addEventListener("progress", function (e) { e.lengthComputable && loadingBar.css("width", 2 + 100 * e.loaded / e.total + "%") }, !1), e.addEventListener("progress", function (e) { e.lengthComputable && loadingBar.css("width", 2 + 100 * e.loaded / e.total + "%") }, !1) } catch (e) { } return e } }), $(document).on("submit", ".ajax_form", function (e) { e.preventDefault(); var form = $(this), t = form.data("target") ? $(form.data("target")) : form; form.find('[type="submit"]').attr("disabled", !0), ajax_anim = !0, form.ajaxSubmit({ success: function (re) { form.find('[type="submit"]').removeAttr("disabled"), "script:" == re.substring(0, 7) ? eval(re.substring(7)) : form.data("replace") ? t.replaceWith(re) : t.html(re), resized() }, error: function (e) { form.find('[type="submit"]').removeAttr("disabled"), $("#loadingBar").css("width", "102%").addClass("error").fadeOut(2e3, function () { loadingBar.removeClass("error").hide() }), t.html("Server error " + e.status), resized() } }) }); var resizeTimer, cboxOptions = { width: "95%", height: "95%", maxWidth: 640, maxHeight: 0, speed: 0, fadeOut: 0, transition: "none", reposition: !1, closeButton: !1, scrolling: !1, trapFocus: !1, opacity: .5, onCleanup: function () { $.extend($.colorbox.settings, cboxOptions) } }; function resized(e) { ww = $(window).innerWidth(), wh = $(window).innerHeight(), setCookie("client_width", ww, 365); var t = $.colorbox.settings; $.colorbox.resize({ width: ww > t.maxWidth ? t.maxWidth : t.width, height: wh > t.maxHeight ? t.maxHeight : t.height }), e || ($(".autosize").not(".autosized").addClass("autosized").autosize({ placeholder: 0, callback: function () { setTimeout(function () { resized(!0) }, 150) } }), $(".autosize").trigger("autosize.resize"), (is_ie || is_safari) && $("[placeholder]").not(".polyfilled").addClass("polyfilled").focus(function () { var e = $(this); e.hasClass("placeholder") && e.caret(0) }).click(function () { var e = $(this); e.hasClass("placeholder") && e.caret(0) }).keydown(function () { var e = $(this); e.hasClass("placeholder") && (e.val(""), e.removeClass("placeholder")) }).blur(function () { var e = $(this); "" != e.val() && e.val() != e.attr("placeholder") || e.addClass("placeholder").val(e.attr("placeholder")) }).blur().parents("form").not(".polyfilled").addClass("polyfilled").submit(function () { $(this).find("[placeholder]").each(function () { $(this).val() == $(this).attr("placeholder") && $(this).val("") }) })) } $.extend($.colorbox.settings, cboxOptions), $(window).resize(function () { clearTimeout(resizeTimer), resizeTimer = setTimeout(resized, 200) }), $(document).on({ mousedown: function (e) { e.preventDefault(); var t = $("#colorbox").offset(), o = e.pageX - t.left, i = e.pageY - t.top; $(document).on("mousemove.drag", function (e) { $("#colorbox").offset({ top: e.pageY - i, left: e.pageX - o }) }) }, mouseup: function () { $(document).unbind("mousemove.drag") } }, "#colorbox h6"), $(document).on("click contextmenu", ".modal", function () { var that = $(this); return (null == that.data("confirm") || confirm(that.data("confirm"))) && $.get(that.data("href") || this.href, function (re) { "script:" == re.substring(0, 7) ? eval(re.substring(7)) : (that.data("w") && ($.colorbox.settings.maxWidth = that.data("w")), $.colorbox({ html: re, overlayClose: null == that.data("no-overlay-close"), height: "auto", onComplete: function () { setTimeout(resized, 100), $("#cboxContent h6").prepend('<a onclick="$.colorbox.close();">×</a>') } })) }), !1 }), $(document).on("click", ".ajax", function () { var link = $(this); return (null == link.data("confirm") || confirm(link.data("confirm") || I18N.delete)) && (ajax_anim = !0, $.post(this.href || $(this).data("href"), function (re) { "script:" == re.substring(0, 7) ? eval(re.substring(7)) : (link.data("target") ? $(link.data("target")) : link).html(re), "false" != link.data("resized") && resized() })), !1 }), $(document).on("click dblclick", ".remove_link", function (e) { if ($(this).data("dblclick") && "click" == e.type) return !1; if (null == $(this).data("confirm") || confirm($(this).data("confirm") || I18N.delete)) { var obj = $($(this).data("target")); obj.fadeOut(200, function () { obj.remove() }), $.post(this.href || $(this).data("href"), function (re) { "script:" == re.substring(0, 7) && eval(re.substring(7)) }) } return !1 }), $(document).on("click", "[data-location]", function (e) { location = $(this).data("location") }), $(document).on("click", ".tab_menu li", function (e) { return $(this).siblings().removeClass("selected").end().addClass("selected"), !1 }), $(document).on("click", ".tiny_search label", function (e) { var t = $(this).next(), o = $(this).closest("form"); o.hasClass("active") ? t.hasClass("dirty") ? o.submit() : o.removeClass("active") : o.addClass("active") }), $(document).on("click", "a[data-confirm]:not(.ajax, .modal, .remove_link)", function (e) { if (!confirm($(this).data("confirm") || I18N.delete)) return !1 }); var dd_box, max_zindex = 99999, dl_menu; function flexVideoGrid(e, t, o, i) { e.flexImages({ rowHeight: t, maxRows: o, truncate: i }).find(".media").hover(function () { hover_media = $(this), hover_media_to = setTimeout(function () { var e = hover_media.data("mp4"); hover_media.prepend('<video style="display:none" onloadeddata="$(this).addClass(\'playing\').show();" autoplay muted loop><source type="video/mp4" src="' + e + '">' + (hover_media.data("webm") ? '<source type="video/webm" src="' + e.rsplit(".", 1)[0] + '.webm">' : "") + "</video>") }, 300) }, function () { $(this).find("video").remove(), clearTimeout(hover_media_to) }) } function show_message(e, t, o, i) { $(".message_box").remove(); var n = $('<div class="message_box" onclick="$(this).remove();"><span style="opacity:.8;float:right;margin-right:8px;cursor:pointer;font-size:20px;line-height:1">×</span>' + e + "</div>"); t && n.addClass(t), i ? n.css({ position: "relative", margin: 0 }).prependTo("body") : n.appendTo("body"), n.delay(o || 4500).slideUp() } if ($(document).on("click", ".dd_box", function () { max_zindex += 1; var e = $(this); if ((dd_box = e.next()).is(":visible")) dd_box.hide(), dd_box = !1; else { $(".dd_box+div").hide(); e.position().top; var t = e.position().left; if ((e.data("left") || e.offset().left + dd_box.outerWidth() > ww && e.offset().left + e.outerWidth() - dd_box.outerWidth() > 0) && (t += e.outerWidth() - dd_box.outerWidth()), e.data("up") || e.offset().top + e.outerHeight() + dd_box.outerHeight() > $(document).scrollTop() + wh && e.offset().top - dd_box.outerHeight() > 0) var o = e.position().top - dd_box.outerHeight() - 5; else o = e.position().top + e.outerHeight() + 5; dd_box.unbind().css({ position: "absolute", top: o + "px", left: t + "px", zIndex: max_zindex }).show() } return !1 }), $(document).click(function (e) { !dd_box || dd_box.is(e.target) || dd_box.has(e.target).length || (dd_box.hide(), dd_box = !1) }), $(".toggle_mobile_search").on("click touchstart", function () { $("body").toggleClass("show_mobile_search"), setTimeout(function () { $('.header_search [name="q"]').focus() }, 200) }), $(function () { resized(); var e = "", t = "", o = window.location.pathname, i = window.location.search, n = (navigator.language || navigator.userLanguage || "de").substring(0, 2); "/xmin/" != o.substring(0, 5) && "/api/" != o.substring(0, 5) || (o = "/"), "/" == o[3] && (o = o.substr(3, 500)), i && (o += i); for (var a = 0; a < LANGS.length; a++)e += "<a onmousedown=\"setCookie('lang', '" + LANGS[a][0] + '\', 3650);" href="' + ("en" != LANGS[a][0] ? "/" + LANGS[a][0] : "") + o + '">' + LANGS[a][1] + "</a>"; if ($(".language_menu+div").html(e), !getCookie("lang") && n && n != LANG) { e = ""; for (a = 0; a < LANGS.length; a++)LANGS[a][0] == n || LANGS[a][0] == LANG ? e += "<a style=\"margin-right:15px\" onmousedown=\"setCookie('lang', '" + LANGS[a][0] + '\', 3650);" href="' + ("en" != LANGS[a][0] ? "/" + LANGS[a][0] : "") + o + '">' + LANGS[a][1] + "</a>" : t += "<a onmousedown=\"setCookie('lang', '" + LANGS[a][0] + '\', 3650);" href="' + ("en" != LANGS[a][0] ? "/" + LANGS[a][0] : "") + o + '">' + LANGS[a][1] + "</a>"; $("body").append('<div class="message_box info" style="top:auto;bottom:0;margin:0;"><span style="margin-right:15px"><img class="hide-xs" src="/static/img/language_fff.svg" style="height:16px;position:relative;top:3px"> Choose your language:</span>' + e + '<a class="dd_box menu language_menu">More &rarr;</a><div>' + t + "</div></div>") } $(".media_search").submit(function () { var e = $.trim($(this).find(".q").removeAttr("name").val()); if (e && ($(this).attr("action", $(this).attr("action") + e + "/"), setCookie("manual_search", 1, 0, 3)), $(this).find('[name="hp"]').val() || $(this).find('[name="hp"]').removeAttr("name"), $(this).find('[name="order"]').val() || $(this).find('[name="order"]').removeAttr("name"), $(this).find('[name="cat"]').val() || $(this).find('[name="cat"]').removeAttr("name"), $(this).find('[name="min_width"]').val() || $(this).find('[name="min_width"]').removeAttr("name"), $(this).find('[name="min_height"]').val() || $(this).find('[name="min_height"]').removeAttr("name"), !$(this).formSerialize()) return window.location = $(this).attr("action"), !1 }), $(".media_search .select_image_type span").click(function () { var e = $(this).closest("form"), t = $(this).data("type"); $(".media_search .image_type").html($(this).text()), e.attr("action", LANG_URL_PREFIX + "/" + t + "s/search/"), dd_box.hide(), dd_box = !1, e.find('[name="q"]').val() ? e.submit() : e.find('[name="q"]').focus() }), setTimeout(function () { "ontouchstart" in window || window.location.hash || $(document).scrollTop() || $("[data-autofocus]").last().focus() }, 250), ~$.inArray(LANG, ["de", "en", "es", "fr", "it", "ja", "ko", "pt"]) && $('.media_search input[name="q"]').autoComplete({ onSelect: function (e) { "keydown" != e.type && $(".media_search").submit() }, source: function (e, t) { if (!(!is_human || e.length > 30 || e.indexOf("/") > -1)) { try { ac_xhr.abort() } catch (e) { } ac_xhr = $.ajax({ url: "/suggest_" + LANG + "/", type: "POST", dataType: "json", contentType: "application/json", data: JSON.stringify({ suggest: { search_term: { prefix: e, completion: { field: "suggest_" + LANG, size: 5 } } } }), success: function (e) { var o = []; $.each(e.suggest.search_term[0].options, function () { o.push(this.text) }), t(o) } }) } } }), $("#toTop").click(function () { $("body,html").animate({ scrollTop: 0 }) }), $(window).scroll(function () { $(this).scrollTop() > 480 ? $("#toTop").addClass("show") : $("#toTop").removeClass("show") }), $(document).on("click", ".translate", function () { return wopen("http://translate.google.de/#auto|" + LANG + "|" + encodeURIComponent($($(this).data("el")).text().substring(0, 999)), 800, 500, "translate") }), $(".linkify").each(function () { $(this).html(linkify($(this).html())) }), $(".photo-description").parent().each(function (e) { $(this).height($(this).height() + 35) }), $(".media_list").length ? ($("#paginator_clone").html($(".paginator").clone()), $(".flex_grid.video").length ? (flexVideoGrid($(".flex_grid.video.search_results"), 280, 0, !1, ""), $(".flex_grid.video.sponsored_videos").each(function () { flexVideoGrid($(this), parseInt($(this).data("rowHeight")) || 280, parseInt($(this).data("rows")) || 1, !1) })) : ($(".flex_grid.search_results").flexImages({ rowHeight: 300 }), $(".flex_grid.sponsored_images").each(function () { $(this).flexImages({ rowHeight: parseInt($(this).data("rowHeight")) || 180, maxRows: parseInt($(this).data("rows")) || 1 }) })), $("[data-lazy]").unveil(400)) : $("#media_show.photo").length ? ($(".copy_to_clipboard").click(function () { copyToClipboard($(this).prev().html()), $(this).val().indexOf("✔") < 0 && $(this).val("✔ " + $(this).val()).css("font-size", "12px") }), $(".dl_btn, .view_btn").click(function () { dl_menu && dl_menu.is(":visible") && !$(".dl_btn").hasClass("modal") && (setTimeout(function () { $(".canva-ad-container").width($(".attribution_field").width() - 4) }, 40), $("#say_thanks_overlay").fadeIn(), dl_menu && dl_menu.hide()) }), $(".flex_grid.sidebar_thumbs").flexImages({ rowHeight: 160, maxRows: 3 }), $(".flex_grid.content_thumbs").flexImages({ rowHeight: 160, maxRows: 1 })) : $("#media_show.video").length ? (flexVideoGrid($(".flex_grid.video.related_videos"), 240, 4, !0), flexVideoGrid($(".flex_grid.video.sponsored_videos"), 240, 2, !0)) : $(".signup_form.new").length && $.get(LANG_URL_PREFIX + "/accounts/register/ets/", function (e) { $(".signup_form .data").each(function () { var t = "f-" + e + "-" + $(this).attr("name"); $(this).attr("name", t) || $(this).prop("name", t) }), $(".signup_form.new").show() }), $("#media_show").length && (setTimeout(function () { $("#media_show .init").removeClass("init") }, 5e3), $("#media_show .init").mouseleave(function () { $(this).removeClass("init") }), $(".download_menu span").on("click contextmenu", function () { return (dl_menu = $(this).next()).is(":visible") ? dl_menu.hide() : (wh - dl_menu.prev().offset().top + $(document).scrollTop() > 250 ? dl_menu.removeClass("ne").addClass("se") : dl_menu.removeClass("se").addClass("ne"), dl_menu.width(dl_menu.prev().width() + 22).show().find(".selected input").prop("checked", !0)), !1 }), $(document).click(function (e) { !dl_menu || dl_menu.is(e.target) || dl_menu.has(e.target).length || (dl_menu.hide(), dl_menu = null) }), $(".download_menu tr").click(function () { $(".download_menu tr").removeClass("selected"); var e = $(this).find("input").eq(0); e.prop("checked", !0), $('.download_menu [value="' + e.val() + '"]').closest("tr").addClass("selected"); var t = e.val(), o = e.data("perm"); t.indexOf("/") < 0 && (t = LANG_URL_PREFIX + "/" + $(".download_menu").data("type") + "/download/" + t), show_captcha && o || !auth_user && "auth" == o ? ($(".dl_btn, .view_btn").addClass("modal"), $(".dl_btn").attr("href", t + "?attachment&modal"), $(".view_btn").attr("href", t + "?modal")) : ($(".dl_btn, .view_btn").removeClass("modal"), $(".dl_btn").attr("href", t + "?attachment"), $(".view_btn").attr("href", t)), $(".dl_btn").attr("target", e.data("target") ? "_blank" : "") }), $(".download_menu tr:not(.no_default)").last().click()); var r = getCookie("g_rated"); window.location.host.indexOf("safesearch") > -1 || "permanent" == r ? (r = !0, $(".toggle_g_rated").attr("disabled", !0).parent().parent().attr("title", "SafeSearch is enabled and locked.").click(function () { alert(this.title) })) : $(document).on("click", ".toggle_g_rated", function () { setCookie("g_rated", (r = $(this).is(":checked")) ? 1 : "", 3650), $(".toggle_g_rated").prop("checked", r) }), r ? $(".toggle_g_rated").prop("checked", !0) : "" != r && (nsfw_placeholder = '            <b class="nsfw_placeholder modal" data-href="/service/safesearch/" style="display:table;position:absolute;width:100%;height:100%;background:#111;color:#fff;text-align:center;font-weight:normal;cursor:pointer">                <span style="display:table-cell;vertical-align:middle;line-height:1.5;padding:0 10px">                    <span style="font-size:18px;display:block;margin:0 0 14px">' + I18N.adult_content + '</span>                    <span style="font-size:14px;color:#aaa">' + I18N.safesearch + "</span>                </span>            </b>", $(".flex_grid .item.nsfw").each(function () { $(this).prepend(nsfw_placeholder) })) }), "de" == LANG && !getCookie("cookies_ok")) { var cookies_hint = { de: 'Um Dein Nutzererlebnis zu verbessern, setzen wir <a href="/service/privacy/#cookies">Cookies</a> ein.' }; $('<div class="message_box info" style="position:relative;margin:0;">' + (cookies_hint[LANG] || cookies_hint.en) + " &nbsp; <span class=\"pure-button button-sm\" onclick=\"setCookie('cookies_ok', 1, 365*5);$('.message_box').remove();\">OK</span></div>").prependTo("body") } $(".linkify.ucg > a").attr("rel", "nofollow"), $('[data-href*="/accounts/favorite/"] *, [data-href*="/images/like/"] *, [data-href*="/videos/like/"] *').css("pointer-events", "none");